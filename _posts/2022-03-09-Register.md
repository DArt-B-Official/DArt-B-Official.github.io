---
title: '[Study] Register'
date: 2022-03-09 00:00:00
categories: [Study, CS]
tags: [os, register]
---

# λ μ§€μ¤ν„°λ€?
---
: λ μ§€μ¤ν„°(register)λ” CPU λ‚΄λ¶€μ— μ΅΄μ¬ν•λ” λ‹¤λ©μ  μ €μ¥κ³µκ°„μΌλ΅μ„, CPUκ°€ μ”μ²­μ„ μ²λ¦¬ν•λ”λ° ν•„μ”ν• λ°μ΄ν„°λ¥Ό μΌμ‹μ μΌλ΅ μ €μ¥. μ‚°μ  μ—°μ‚°μ— ν•„μ”ν• λ°μ΄ν„°λ¥Ό μ €μ¥ν•κ±°λ‚ μ£Όμ†λ¥Ό μ €μ¥ν•κ³  μ°Έμ΅°ν•λ” λ“± λ‹¤μ–‘ν• μ©λ„λ΅ μ‚¬μ©λ¨.

> λ μ§€μ¤ν„°λ” 32bit ν™κ²½μ—μ„λ” μ²« κΈ€μκ°€ **E(Extended)**λ΅ μ‹μ‘ν•κ³ , 64bit ν™κ²½μ—μ„λ” μ²« κΈ€μκ°€ **R(Regitster)**λ΅ μ‹μ‘ν•κ³  32bitμ λ μ§€μ¤ν„°λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤. ex) RAX
{: .prompt-tip}

<br />

# π”§ x86 ν™κ²½(32bit)
---
## λ²”μ© λ μ§€μ¤ν„°
: **λ²”μ© λ μ§€μ¤ν„°(General Register)**λ” μ£Όμ©λ„κ°€ μ΅΄μ¬ν•μ§€λ§, λ‹¤μ–‘ν• μ©λ„λ΅λ„ μ‚¬μ©λ  μ μλ” λ μ§€μ¤ν„°. *x86*μ—μ„ κ°κ°μ λ²”μ© λ μ§€μ¤ν„°λ” **4byte(=32bit)**λ¥Ό μ €μ¥ν•  μ μμ. κ° λ μ§€μ¤ν„°λ” λΉ„νΈμ ν•μ„νΈν™κ³Ό κ³µκ°„μ λ‚­λΉ„λ¥Ό μ—†μ• κΈ° μ„ν•΄ κµ¬μ—­μ΄ λ‚λ‰μ–΄ μ΅΄μ¬ν•¨.

<br />

|μ΄λ¦„|μ£Όμ©λ„|
|:---|:-----|
|**EAX**(Accumulator)|μ‚°μ  μ—°μ‚° μ‹ μƒμ/λ³€μ κ°’ μ €μ¥, ν•¨μμ λ°ν™ κ°’ μ§€μ •|
|**EBX**(Base)|λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό μ €μ¥. μ‚°μ μ΄λ‚ λ³€μ μ €μ¥μ— μ‚¬μ©λκΈ°λ„ ν•¨|
|**ECX**(Counter)|λ°λ³µλ¬Έμ λ°λ³µ νμμ™€ κ°μΆ… μ—°μ‚°μ μ‹ν–‰ νμλ΅ μ‚¬μ©λλ” κ°’ μ €μ¥|
|**EDX**(Data)|EAXμ ν™•μ¥ κ°λ…μΌλ΅, λ‚λ—μ…/κ³±μ… λ…λ Ή λ“±μ— μ‚¬μ©. λ²”μ© λ©μ μ μ €μ¥μ†λ΅ μ‚¬μ©ν•κΈ°λ„ ν•¨|
|π”½**μΈλ±μ¤ λ μ§€μ¤ν„°**||
|**ESI**(Source index)|λ°μ΄ν„° μ΅°μ‘/λ³µμ‚¬ μ‹μ— λ°μ΄ν„°μ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|
|**EDI**(Destination index)|λ°μ΄ν„°λ¥Ό μ΅°μ‘/λ³µμ‚¬ μ‹μ— λ©μ μ§€ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|
|π”½**ν¬μΈν„° λ μ§€μ¤ν„°**||
|**ESP**(Stack pointer)|μ¤νƒ ν”„λ μ„μ λμ§€μ  μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|
|**EBP**(Stack base pointer)|μ¤νƒ ν”„λ μ„μ λ°”λ‹¥(μ‹μ‘) μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|

> μ•κΈ€μμ Eλ” Extendedλ¥Ό μλ―Έ

<br />

## μ„Έκ·Έλ¨ΌνΈ λ μ§€μ¤ν„°
: **μ„Έκ·Έλ¨ΌνΈ λ μ§€μ¤ν„°(Segment Register)**λ” ν”„λ΅μ„Έμ¤μ νΉμ • μ„Έκ·Έλ¨ΌνΈλ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°μ μ—­ν• μ„ μν–‰. κ° λ μ§€μ¤ν„°μ ν¬κΈ°λ” **16bit**.

<br />

|μ΄λ¦„|μ£Όμ©λ„|
|:--|:----|
|**CS**(code segment)|μ½”λ“ μμ—­μ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚΄|
|**DS**(data segment)|λ°μ΄ν„° μμ—­μ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚΄|
|**SS**(stack segment)|μ¤νƒ μμ—­μ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚΄|
|**ES**(extra segment)|μ¶”κ°€μ μΈ λ°μ΄ν„° μ„Έκ·Έλ¨ΌνΈλ΅, λ©”λ¨λ¦¬ μ£Όμ† μ§€μ •μ„ λ‹¤λ£¨λ” μ¤νΈλ§ μ—°μ‚°μ— μ‚¬μ©|
|**FS**/**GS**(general purpose segment)|μ¶”κ°€μ μΈ λ°μ΄ν„° μ„Έκ·Έλ¨ΌνΈλ΅, μ΄μμ²΄μ λ³„λ΅ μ©λ„λ¥Ό κ²°μ •ν•  μ μλ„λ΅ λ²”μ©μ μΈ μ©λ„λ΅ μ“°μ„|

<br />

## λ…λ Ήμ–΄ ν¬μΈν„° λ μ§€μ¤ν„°
: **λ…λ Ήμ–΄ ν¬μΈν„° λ μ§€μ¤ν„°(Instruction Pointer)**λ” CPUκ°€ μ–΄λ λ¶€λ¶„μ κΈ°κ³„μ–΄ μ½”λ“λ¥Ό λ‹¤μμΌλ΅ μ‹¤ν–‰ν• μ§€ κ°€λ¦¬ν‚¤λ” μ—­ν• μ„ ν•¨. x86 μ•„ν‚¤ν…μ²μ λ…λ Ήμ–΄ λ μ§€μ¤ν„°λ” **EIP**(Instruction pointer)μ΄λ©°, ν¬κΈ°λ” **32bit**. CPUλ” EIPμ— μ €μ¥λ λ©”λ¨λ¦¬ μ£Όμ†κ°€ κ°€λ¦¬ν‚¤λ” λ…λ Ήμ–΄λ¥Ό ν•λ‚ μ²λ¦¬ν•κ³  ν„μ¬ μν–‰ν•λ” λ…λ Ήμ–΄μ ν¬κΈ°λ§νΌ μλ™μΌλ΅ ν¬κΈ°λ¥Ό μ¦κ°€μ‹μΌ λ‹¤μ μ‹¤ν–‰ν•  λ…λ Ήμ–΄ μ£Όμ†λ¥Ό κ°–κ² λ¨.

<br />

## ν”λκ·Έ λ μ§€μ¤ν„°
: **ν”λκ·Έ λ μ§€μ¤ν„°(Flag Register)**λ” ν”„λ΅μ„Έμ„μ™€ λ‹¤μ–‘ν• μ‚°μ κ²°κ³Όμ ν„μ¬ μƒνƒλ¥Ό μ €μ¥ν•κ³  μλ” λ μ§€μ¤ν„°. x86 μ•„ν‚¤ν…μ²μ—μ„λ” **EFLAGS**λΌκ³  λ¶λ¦¬λ” 32bit ν¬κΈ°μ ν”λκ·Έ λ μ§€μ¤ν„°κ°€ μ΅΄μ¬ν•¨.

<br />

|ν”λκ·Έ|μλ―Έ|
|:----|:---|
|**CF**(Carry Flag)|λ¶€νΈ μ—†λ” μμ μ—°μ‚° κ²°κ³Όκ°€ λΉ„νΈ λ²”μ„λ¥Ό λ„μΌλ©΄ μ„¤μ •(1)|
|**ZF**(Zero Flag)|μ—°μ‚°μ κ²°κ³Όκ°€ 0μΌ κ²½μ° μ„¤μ •(1)|
|**SF**(Sign Flag)|μ—°μ‚°μ κ²°κ³Όκ°€ μμμΌ κ²½μ° μ„¤μ •(1)|
|**OF**(Overflow Flag)|λ¶€νΈ μλ” μμ μ—°μ‚° κ²°κ³Όκ°€ λΉ„νΈ λ²”μ„λ¥Ό λ„μΌλ©΄ μ„¤μ •(1)|
|**AF**(Auxiliary Carry Flag)|λ³΄μ΅° μΊλ¦¬ ν”λκ·Έλ΅, μ—°μ‚° κ²°κ³Όκ°€ ν•μ„ 4λΉ„νΈλ¥Ό λ„μΌλ©΄ μ„¤μ •(1)|
|**PF**(Parity Flag)|μ—°μ‚° κ²°κ³Όκ°€ 1λΉ„νΈμ κ°μκ°€ μ§μμΈ κ²½μ° μ„¤μ •(1)|
|**DF**(Direction Flag)|λ¬Έμμ—΄ λ°μ΄ν„°λ¥Ό μ΄λ™μ‹ν‚¤κ±°λ‚ λΉ„κµν•  λ• μ£Όμ† λ μ§€μ¤ν„°κ°€ μ„¤μ •(1)μ΄λ©΄ κ°μ†, λ°λ€λ” κ°μ†|
|**TF**(Trap Flag)|μ„¤μ •(1)μΈ κ²½μ° ν• λ…λ Ήμ΄ μ‹¤ν–‰λ  λ•λ§λ‹¤ λ‚΄λ¶€ μΈν„°λ½νΈ λ°μƒ. λ””λ²„κΉ…μ— μ‚¬μ©|
|**IF**(Interrupt Flag)|ν‚¤λ³΄λ“ μ…λ ¥κ³Ό κ°™μ€ μ™Έλ¶€ μΈν„°λ½νΈκ°€ μ²λ¦¬/λ¬΄μ‹ λμ–΄μ•Ό ν•λ”μ§€ λ‚νƒ€λƒ„|


<br />

**<span style="color: blue">π”½ Flag Register</span>**

|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|
|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|
|0|0|0|0|0|0|0|0|0|0|ID|VIP|VIF|AC|VM|RF|0|NT|IOPL|OF|DF|IF|TF|SF|ZF|0|AF|0|PF|1|CF|

<br />

# π”§ x64 ν™κ²½(64bit)
---
## λ²”μ© λ μ§€μ¤ν„°
: *x64*μ—μ„ κ°κ°μ λ²”μ© λ μ§€μ¤ν„°λ” **8byte(=64bit)**λ¥Ό μ €μ¥ν•  μ μμ. κ° λ μ§€μ¤ν„°λ” bitμ ν•μ„νΈν™κ³Ό κ³µκ°„μ λ‚­λΉ„λ¥Ό μ—†μ• κΈ° μ„ν•΄ κµ¬μ—­μ΄ λ‚λ‰μ–΄ μ΅΄μ¬ν•¨.

<br />

|μ΄λ¦„|μ£Όμ©λ„|
|:---|:-----|
|**RAX**(Accumulator)|μ‚°μ  μ—°μ‚° μ‹ μƒμ/λ³€μ κ°’ μ €μ¥, ν•¨μμ λ°ν™ κ°’ μ§€μ •|
|**RBX**(Base)|x64μ—μ„λ” μ£Όλ μ©λ„ μ—†μ|
|**RCX**(Counter)|λ°λ³µλ¬Έμ λ°λ³µ νμμ™€ κ°μΆ… μ—°μ‚°μ μ‹ν–‰ νμλ΅ μ‚¬μ©λλ” κ°’ μ €μ¥|
|**RDX**(Data)|x64μ—μ„λ” μ£Όλ μ©λ„ μ—†μ|
|**RSI**(Source index)|λ°μ΄ν„° μ΅°μ‘/λ³µμ‚¬ μ‹μ— μ›λ³Έμ„ κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|
|**RDI**(Destination index)|λ°μ΄ν„°λ¥Ό μ΅°μ‘/λ³µμ‚¬ μ‹μ— λ©μ μ§€λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|
|**RSP**(Stack pointer)|μ¤νƒ ν”„λ μ„μ λμ§€μ  μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|
|**RBP**(Stack base pointer)|μ¤νƒ ν”„λ μ„μ λ°”λ‹¥(μ‹μ‘) μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°|

μ΄μ™Έμ—λ„ x64μ—λ” **r8, r9, ... , r15**κΉμ§€μ λ²”μ© λ μ§€μ¤ν„°κ°€ λ” μ΅΄μ¬ν•¨.

<br />

## μ„Έκ·Έλ¨ΌνΈ λ μ§€μ¤ν„°
: **μ„Έκ·Έλ¨ΌνΈ λ μ§€μ¤ν„°(Segment Register)**λ” x64λ΅ μ•„ν‚¤ν…μ³κ°€ ν™•μ¥λλ©΄μ„ μ©λ„μ— ν° λ³€ν™”κ°€ μƒκΈ΄ λ μ§€μ¤ν„°λ΅, κ° λ μ§€μ¤ν„°μ ν¬κΈ°λ” **16bit**.

<br />

|μ΄λ¦„|μ£Όμ©λ„|
|:--|:----|
|**CS**(code segment)|μ½”λ“ μμ—­μ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚΄|
|**DS**(data segment)|λ°μ΄ν„° μμ—­μ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚΄|
|**SS**(stack segment)|μ¤νƒ μμ—­μ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚΄|
|**ES**(extra segment), **FS**/**GS**(general purpose segment)|μ΄μμ²΄μ  λ³„λ΅ μ©λ„λ¥Ό κ²°μ •ν•  μ μλ„λ΅ λ²”μ©μ μΈ μ©λ„λ΅ μ“°μ„|

<br />

## λ…λ Ήμ–΄ ν¬μΈν„° λ μ§€μ¤ν„°
: **λ…λ Ήμ–΄ ν¬μΈν„° λ μ§€μ¤ν„°(Instruction Pointer)**λ” CPUκ°€ μ–΄λ λ¶€λ¶„μ κΈ°κ³„μ–΄ μ½”λ“λ¥Ό λ‹¤μμΌλ΅ μ‹¤ν–‰ν• μ§€ κ°€λ¦¬ν‚¤λ” μ—­ν• μ„ ν•¨. x64 μ•„ν‚¤ν…μ²μ λ…λ Ήμ–΄ λ μ§€μ¤ν„°λ” **RIP**(Instruction pointer)μ΄λ©°, ν¬κΈ°λ” **64bit**.

<br />

## ν”λκ·Έ λ μ§€μ¤ν„°
: **ν”λκ·Έ λ μ§€μ¤ν„°(Flag Register)**λ” ν”„λ΅μ„Έμ„μ™€ λ‹¤μ–‘ν• μ‚°μ κ²°κ³Όμ ν„μ¬ μƒνƒλ¥Ό μ €μ¥ν•κ³  μλ” λ μ§€μ¤ν„°. x64 μ•„ν‚¤ν…μ²μ—μ„λ” **RFLAGS**λΌκ³  λ¶λ¦¬λ” 64bit ν¬κΈ°μ ν”λκ·Έ λ μ§€μ¤ν„°κ°€ μ΅΄μ¬ν•¨. 64bitμ΄λ―€λ΅ μµλ€ 64κ°μ ν”λκ·Έλ¥Ό μ €μ¥ν•  μ μμ§€λ§, μ‹¤μ λ΅λ” 20μ—¬κ°μ λΉ„νΈλ§μ„ μ‚¬μ©ν•¨.


> [x86μ **EFLAGS**λ¥Ό μ°Έκ³ ](#ν”λκ·Έ-λ μ§€μ¤ν„°)

<br />


# λ μ§€μ¤ν„° νΈν™
---
> *x86-64* μ•„ν‚¤ν…μ²λ” *IA-32*μ 64λΉ„νΈ ν™•μ¥ μ•„ν‚¤ν…μ²μ΄λ©°, νΈν™μ΄ κ°€λ¥ν•©λ‹λ‹¤. λ”°λΌμ„ x86-64μ—μ„ IA-32μ λ μ§€μ¤ν„°λ¥Ό κ·Έλ€λ΅ μ‚¬μ©μ΄ κ°€λ¥ν•©λ‹λ‹¤.
μλ¥Ό λ“¤μ–΄, x86μ λ μ§€μ¤ν„°μΈ **eax**λ” x64μ λ μ§€μ¤ν„°μΈ **rax**μ ν•μ„ 32λΉ„νΈλ¥Ό μλ―Έν•©λ‹λ‹¤. κ·Έλ¦ΌμΌλ΅ λ‚νƒ€λ‚΄λ©΄ μ•„λμ™€ κ°™μµλ‹λ‹¤.

![image](https://user-images.githubusercontent.com/37824335/222783062-7c6598a7-b67a-4670-a428-48a7822ef45f.png)

<br />

**<span style="color: blue">π”½ Register κµ¬μ„±</span>**

|63~0λΉ„νΈ|31~0λΉ„νΈ|15~0λΉ„νΈ|15~8λΉ„νΈ|7λΉ„νΈ~0λΉ„νΈ|
|:-----:|:-----:|:-----:|:-----:|:-----:|
|RAX|EAX|AX|AH|AL|
|RBX|EBX|BX|BH|BL|
|RCX|ECX|CX|CH|CL|
|RDX|EDX|DX|DH|DL|
|RSI|ESI|SI|-|-|
|RDI|EDI|DI|-|-|
|RSP|ESP|SP|-|-|
|RBP|EBP|BP|-|-|
